<!doctype html><html lang=en-us dir=ltr><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="
  Actions
  #


  
    

    

    
    
      Back
    
    

    
    
      Next
    
    

    
    
  

  
    
  

    

  
  
At this point you should have public web page for the workshop built off your repository and
hosted under your GitHub handle. This section of the workshop contains a deep dive on Actions.


Break down the actions currently in the CI/CD workflow and job.


Guide you through two kinds of custom actions you can use to enhance your current workflow."><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#343a40"><meta name=color-scheme content="light dark"><meta property="og:url" content="https://justinianfruit.github.io/workshop-learn-github-actions/workshop/4-actions/"><meta property="og:site_name" content="Learn GitHub Actions"><meta property="og:title" content="4 - Actions Deep Dive"><meta property="og:description" content="Actions # Back Next At this point you should have public web page for the workshop built off your repository and hosted under your GitHub handle. This section of the workshop contains a deep dive on Actions.
Break down the actions currently in the CI/CD workflow and job.
Guide you through two kinds of custom actions you can use to enhance your current workflow."><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="workshop"><title>4 - Actions Deep Dive | Learn GitHub Actions</title>
<link rel=icon href=/workshop-learn-github-actions/favicon.png><link rel=manifest href=/workshop-learn-github-actions/manifest.json><link rel=canonical href=https://justinianfruit.github.io/workshop-learn-github-actions/workshop/4-actions/><link rel=stylesheet href=/workshop-learn-github-actions/book.min.fe11eb3aae5dceb413595831f1d5c61da2c40744de928d128a40f38f45adf3e1.css integrity="sha256-/hHrOq5dzrQTWVgx8dXGHaLEB0Teko0SikDzj0Wt8+E=" crossorigin=anonymous></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/workshop-learn-github-actions/><span>Learn GitHub Actions</span></a></h2><ul><li><a href=/workshop-learn-github-actions/workshop/>Workshop</a><ul><li><a href=/workshop-learn-github-actions/workshop/preamble/>Preamble</a></li><li><a href=/workshop-learn-github-actions/workshop/1-create-repo/>1 - Create the Repository</a></li><li><a href=/workshop-learn-github-actions/workshop/2-introduction/>2 - Introducing GitHub Actions</a><ul></ul></li><li><a href=/workshop-learn-github-actions/workshop/3-first-workflow/>3 - First Workflow</a></li><li><a href=/workshop-learn-github-actions/workshop/4-actions/ class=active>4 - Actions Deep Dive</a></li><li><a href=/workshop-learn-github-actions/workshop/closing/>Closing</a></li></ul></li><li><a href=/workshop-learn-github-actions/credits/>Credits</a><ul></ul></li></ul><a href=https://justinianfruit.github.io/workshop-learn-github-actions/credits#artist style=outline:none><figure><img src=https://justinianfruit.github.io/workshop-learn-github-actions/art/bluegreen-dog-icons/paw.png style="width:100%;height:auto;opacity:1;filter:drop-shadow(5px 5px 5px #1f1f1f)"></figure></a></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/workshop-learn-github-actions/svg/menu.svg class=book-icon alt=Menu></label><h3>4 - Actions Deep Dive</h3><label for=toc-control><img src=/workshop-learn-github-actions/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#reminder-set-up-the-fixup-alias>Reminder: Set up the fixup alias</a></li><li><a href=#expressions>Expressions</a></li><li><a href=#metadata>Metadata</a></li><li><a href=#current-actions>Current Actions</a><ul><li><a href=#3rd-party-actions>3rd Party Actions</a><ul><li><a href=#advanced-usage---pinning>Advanced Usage - Pinning</a></li></ul></li><li><a href=#script-actions>Script Actions</a></li></ul></li><li><a href=#new-actions>New Actions</a><ul><li><a href=#composite-actions>Composite Actions</a><ul><li><a href=#build-it>Build it</a></li><li><a href=#use-it>Use it</a></li></ul></li><li><a href=#docker-container-actions>Docker Container Actions</a><ul><li><a href=#build-it-1>Build It</a></li><li><a href=#use-it-1>Use It</a></li></ul></li><li><a href=#javascript-actions>Javascript Actions</a><ul><li><a href=#build-it-2>Build It</a></li><li><a href=#use-it-2>Use It</a></li></ul></li></ul></li></ul></nav></aside></header><div class=slides><article class="markdown book-article"><h1 id=actions>Actions
<a class=anchor href=#actions>#</a></h1><div class=slide><div class=slide-nav><a href=https://justinianfruit.github.io/workshop-learn-github-actions/workshop/3-first-workflow/ class="book-btn prevSegment">Back
</a><a rel=noopener class="book-btn nextSegment" style=position:absolute;right:0>Next</a></br></div><div class=slide-content><div class="book-columns flex flex-wrap" style=justify-content:center;align-items:center><div class="flex-even markdown-inner" style=flex-grow:1;text-align:center><figure><a href=/credits><a href=/credits><img src=https://justinianfruit.github.io/workshop-learn-github-actions/art/bluegreen-dog-icons/turning.png width=100%></a></figure></div><div class="flex-even markdown-inner" style=flex-grow:3;text-align:inherit><p>At this point you should have public web page for the workshop built off your repository and
hosted under your GitHub handle. This section of the workshop contains a deep dive on Actions.</p><ul><li><p>Break down the actions currently in the <code>CI/CD</code> workflow and job.</p></li><li><p>Guide you through two kinds of custom actions you can use to enhance your current workflow.</p></div></li></ul></div><div class=pagebreak></div></div></div><h2 id=reminder-set-up-the-fixup-alias>Reminder: Set up the fixup alias
<a class=anchor href=#reminder-set-up-the-fixup-alias>#</a></h2><div class=slide><div class=slide-nav><a rel=noopener class="book-btn prevSegment">Back
</a><a rel=noopener class="book-btn nextSegment" style=position:absolute;right:0>Next</a></br></div><div class=slide-content><p>To make life easier when we iterate on the workflows later paste this into your terminal.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>alias fixup<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;git add -A; git commit -m &#34;fixup-$(date &#34;+%Y%m%dT%H%M%S&#34;)&#34;; git push&#39;</span>
</span></span></code></pre></div><div class=pagebreak></div></div></div><h2 id=expressions>Expressions
<a class=anchor href=#expressions>#</a></h2><div class=slide><div class=slide-nav><a rel=noopener class="book-btn prevSegment">Back
</a><a rel=noopener class="book-btn nextSegment" style=position:absolute;right:0>Next</a></br></div><div class=slide-content><p>GitHub Actions have access to <a href=https://docs.github.com/en/actions/writing-workflows/choosing-what-your-workflow-does/evaluate-expressions-in-workflows-and-actions>expressions</a>
which allows you extract data and use logic inside the yaml.</p><p>You can identify expressions in a yaml with the <code>${{ }}</code> notation. Expressions can be used in many different places in the yaml.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>if</span>: <span style=color:#ae81ff>${{ github.event_name == &#39;push&#39; }}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>env</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>MY_ENV_VAR</span>: <span style=color:#ae81ff>${{ &lt;expression&gt; }}</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>TIMEOUT_SECONDS</span>: <span style=color:#ae81ff>${{ fromJSON(env.time) }}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>run</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  if [ &#34;${{ github.repository }}&#34; == &#34;my-org/my-repo&#34; ]; then
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    echo &#34;This is a push event for my repo: $MY_ENV_VAR&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  fi
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  curl -m $TIMEOUT_SECONDS https://example.com</span>
</span></span></code></pre></div><div style=position:relative><div style=position:absolute;top:0;right:0><a href=https://justinianfruit.github.io/workshop-learn-github-actions/credits#artist><figure style=padding:0;margin:0><img src=https://justinianfruit.github.io/workshop-learn-github-actions/art/gray-dog-icons/head.png style=width:3em></figure></a></div><div><blockquote class="book-hint warning"><p>Heads up!</p><p>While you can use expressions in <em>many</em> locations in the yaml, they are not universally supported.</p><p>For example, you can&rsquo;t use expressions to generate the yaml itself.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#75715e># invalid 👇</span>
</span></span><span style=display:flex><span><span style=color:#f92672>env</span>: <span style=color:#ae81ff>${{ fromJSON(env) }}</span>
</span></span></code></pre></div></div></div><div class=pagebreak></div></div></div><h2 id=metadata>Metadata
<a class=anchor href=#metadata>#</a></h2><div class=slide><div class=slide-nav><a rel=noopener class="book-btn prevSegment">Back
</a><a rel=noopener class="book-btn nextSegment" style=position:absolute;right:0>Next</a></br></div><div class=slide-content><h3 id=environment-variables><a href=https://docs.github.com/en/actions/writing-workflows/choosing-what-your-workflow-does/store-information-in-variables#default-environment-variables>Environment Variables</a>
<a class=anchor href=#environment-variables>#</a></h3><p>Actions and all code executing within the context of an action can make use of the many default environment variables.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>name</span>: <span style=color:#ae81ff>Print</span>
</span></span><span style=display:flex><span><span style=color:#f92672>run</span>: <span style=color:#ae81ff>echo &#34;Running job for repo: ${GITHUB_REPOSITORY}&#34;</span>
</span></span></code></pre></div><h3 id=contexts><a href=https://docs.github.com/en/actions/writing-workflows/choosing-what-your-workflow-does/accessing-contextual-information-about-workflow-runs>Contexts</a>
<a class=anchor href=#contexts>#</a></h3><p>There is often runtime metadata that you need to make use of within your workflow or action&rsquo;s <code>yaml</code>.</p><p>Actions have access to most of the contexts depending on the specific workflow and job run conditions. Contexts typically have much
more accessible data then <code>Environment Variables</code>. But thanks the the <code>env</code> section of actions and workflows you can export <em>any</em> context data as an environment variable
even if that data is not included in <a href=https://docs.github.com/en/actions/writing-workflows/choosing-what-your-workflow-does/accessing-contextual-information-about-workflow-runs>the defaults</a></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>name</span>: <span style=color:#ae81ff>Print Sometimes</span>
</span></span><span style=display:flex><span><span style=color:#f92672>if</span>: <span style=color:#e6db74>&#34;${{ job.status == &#39;success&#39;&#34;</span> }}
</span></span><span style=display:flex><span><span style=color:#f92672>env</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>JOB_STATUS</span>: <span style=color:#ae81ff>${{job.status}} </span>
</span></span><span style=display:flex><span><span style=color:#f92672>run</span>: <span style=color:#ae81ff>echo &#34;Running job for repo: ${GITHUB_REPOSITORY}&#34;</span>
</span></span></code></pre></div><h4 id=outputs><a href=https://docs.github.com/en/actions/writing-workflows/choosing-what-your-workflow-does/passing-information-between-jobs>Outputs</a>
<a class=anchor href=#outputs>#</a></h4><p>Actions of any kind can support <code>outputs</code>. The outputs available are typically documented
in the README.md of the action. To use an action&rsquo;s output you need to give it an <code>id</code> and use the <a href=https://docs.github.com/en/actions/writing-workflows/choosing-what-your-workflow-does/accessing-contextual-information-about-workflow-runs#steps-context><code>steps</code> context</a></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>  - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Get an entry with a variable that might contain dots or spaces</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>id</span>: <span style=color:#ae81ff>username</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>mikefarah/yq@master</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>with</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>cmd</span>: <span style=color:#ae81ff>yq &#39;.user.name&#39; service.yaml</span>
</span></span><span style=display:flex><span>  - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Reuse a variable obtained in another step</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>run</span>: <span style=color:#ae81ff>echo ${{ steps.username.outputs.result }}</span>
</span></span></code></pre></div><div class=pagebreak></div></div></div><h2 id=current-actions>Current Actions
<a class=anchor href=#current-actions>#</a></h2><div class=slide><div class=slide-nav><a rel=noopener class="book-btn prevSegment">Back
</a><a rel=noopener class="book-btn nextSegment" style=position:absolute;right:0>Next</a></br></div><div class=slide-content><p>The <code>CI/CD</code> job currently has two kinds of actions defined</p><ul><li><a href=https://docs.github.com/en/actions/writing-workflows/choosing-what-your-workflow-does/using-pre-written-building-blocks-in-your-workflow#overview>3rd Party Actions</a></li><li><a href=https://docs.github.com/en/actions/writing-workflows/choosing-what-your-workflow-does/adding-scripts-to-your-workflow>Script Actions</a></li></ul><div class=pagebreak></div></div></div><h3 id=3rd-party-actions>3rd Party Actions
<a class=anchor href=#3rd-party-actions>#</a></h3><div class=slide><div class=slide-nav><a rel=noopener class="book-btn prevSegment">Back
</a><a rel=noopener class="book-btn nextSegment" style=position:absolute;right:0>Next</a></br></div><div class=slide-content><p><a href=https://docs.github.com/en/actions/writing-workflows/choosing-what-your-workflow-does/using-pre-written-building-blocks-in-your-workflow#overview>3rd Party Actions</a> are actions that are defined in other GitHub Repositories. They encapsulate a
specific behavior or step and can often be very complex behind the scenes.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>- <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Checkout</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>actions/checkout@v3</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>with</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>submodules</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>fetch-depth</span>: <span style=color:#ae81ff>0</span>
</span></span></code></pre></div><div class=pagebreak></div></div></div><h4 id=advanced-usage---pinning>Advanced Usage - Pinning
<a class=anchor href=#advanced-usage---pinning>#</a></h4><div class=slide><div class=slide-nav><a rel=noopener class="book-btn prevSegment">Back
</a><a rel=noopener class="book-btn nextSegment" style=position:absolute;right:0>Next</a></br></div><div class=slide-content><p>There are a lot of nuanced ways you can invoke 3rd party actions. The <code>uses</code> directive supports
multiple kinds of reference</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#75715e># by tag</span>
</span></span><span style=display:flex><span><span style=color:#f92672>uses</span>: <span style=color:#ae81ff>actions/checkout@v3</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># by branch</span>
</span></span><span style=display:flex><span><span style=color:#f92672>uses</span>: <span style=color:#ae81ff>actions/checkout@beta</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># by commit hash (most secure)</span>
</span></span><span style=display:flex><span><span style=color:#f92672>uses</span>: <span style=color:#ae81ff>actions/checkout@85e6279cec87321a52edac9c87bce653a07cf6c2</span>
</span></span></code></pre></div><div class=pagebreak></div></div></div><h3 id=script-actions>Script Actions
<a class=anchor href=#script-actions>#</a></h3><div class=slide><div class=slide-nav><a rel=noopener class="book-btn prevSegment">Back
</a><a rel=noopener class="book-btn nextSegment" style=position:absolute;right:0>Next</a></br></div><div class=slide-content><p><a href=https://docs.github.com/en/actions/writing-workflows/choosing-what-your-workflow-does/adding-scripts-to-your-workflow>Script Actions</a> are actions that are defined entirely in the workflow step itself. They run using the default shell of the runner
unless <code>shell</code> is specified.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>name</span>: <span style=color:#ae81ff>Build</span>
</span></span><span style=display:flex><span><span style=color:#f92672>run</span>: <span style=color:#ae81ff>go build .</span>
</span></span></code></pre></div><p>It is also common to use yaml multiline strings to put relatively long scripts into the action directly.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>name</span>: <span style=color:#ae81ff>Build</span>
</span></span><span style=display:flex><span><span style=color:#f92672>run</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  # there is no built-in env variable for the repo name without owner, so we have to parse it out
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  REPO_NAME=$(echo &#34;${GITHUB_REPOSITORY}&#34; | cut -d&#39;/&#39; -f2)
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  hugo --minify -b &#34;https://${GITHUB_REPOSITORY_OWNER}.github.io/$REPO_NAME/&#34;</span>
</span></span></code></pre></div><p>These kinds of actions are infinitely flexible but can be highly dependent on the runner and workflow environment.
Shell scripting is also has a lot of potential pitfalls and easy mistakes that can be made.</p><p>Never the less, it is a very common kind of action to use and is often &ldquo;just enough&rdquo; to get work done while incurring almost
no overhead.</p><div class=pagebreak></div></div></div><h2 id=new-actions>New Actions
<a class=anchor href=#new-actions>#</a></h2><div class=slide><div class=slide-nav><a rel=noopener class="book-btn prevSegment">Back
</a><a rel=noopener class="book-btn nextSegment" style=position:absolute;right:0>Next</a></br></div><div class=slide-content><p>There are two more types of actions that can be very useful. The example workflow did not use them but we will add them now.</p><ul><li><a href=https://docs.github.com/en/actions/sharing-automations/creating-actions/creating-a-composite-action>Composite Actions</a></li><li><a href=https://docs.github.com/en/actions/sharing-automations/creating-actions/creating-a-docker-container-action>Docker Container Actions</a></li><li><a href=https://docs.github.com/en/actions/sharing-automations/creating-actions/creating-a-javascript-action>Javascript Actions</a></li></ul><div class=pagebreak></div></div></div><h3 id=composite-actions>Composite Actions
<a class=anchor href=#composite-actions>#</a></h3><div class=slide><div class=slide-nav><a rel=noopener class="book-btn prevSegment">Back
</a><a rel=noopener class="book-btn nextSegment" style=position:absolute;right:0>Next</a></br></div><div class=slide-content><p><a href=https://docs.github.com/en/actions/sharing-automations/creating-actions/creating-a-composite-action>Composite Actions</a> are a way to combine one or more other actions into a single unit. They are often used to automate complex behaviors into a more streamlined interface.</p><p>Creating and using a new Composite Action locally is as easy as creating a new directory and writing an <code>action.yaml</code> file.</p><div class=pagebreak></div></div></div><h4 id=build-it>Build it
<a class=anchor href=#build-it>#</a></h4><div class=slide><div class=slide-nav><a rel=noopener class="book-btn prevSegment">Back
</a><a rel=noopener class="book-btn nextSegment" style=position:absolute;right:0>Next</a></br></div><div class=slide-content><p>To define a new custom composite action: create a new file at <code>.github/actions/build/action.yaml</code> with the content below. You might notice that this we are simply moving the <code>Setup Hugo</code> and <code>Build</code> steps from the original workflow. That is true, but we have now made our own &ldquo;build&rdquo; abstraction that is easier to re-use and simplifies the main workflow.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>name</span>: <span style=color:#e6db74>&#39;Build&#39;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>description</span>: <span style=color:#e6db74>&#39;Build the workshop web assets&#39;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>runs</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>using</span>: <span style=color:#e6db74>&#34;composite&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>steps</span>:
</span></span><span style=display:flex><span>    - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Setup Hugo</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>peaceiris/actions-hugo@v3</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>with</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>hugo-version</span>: <span style=color:#e6db74>&#39;latest&#39;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>extended</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Build</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>shell</span>: <span style=color:#ae81ff>bash</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>run</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        # make the assets tgz users need to bootstrap the workshop
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        make workshop-assets
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        # there is no built-in env variable for the repo name without owner, so we have to parse it out
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        REPO_NAME=$(echo &#34;${GITHUB_REPOSITORY}&#34; | cut -d&#39;/&#39; -f2)
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        hugo --minify -b &#34;https://${GITHUB_REPOSITORY_OWNER}.github.io/$REPO_NAME/&#34;</span>
</span></span></code></pre></div><div class=pagebreak></div></div></div><h4 id=use-it>Use it
<a class=anchor href=#use-it>#</a></h4><div class=slide><div class=slide-nav><a rel=noopener class="book-btn prevSegment">Back
</a><a rel=noopener class="book-btn nextSegment" style=position:absolute;right:0>Next</a></br></div><div class=slide-content><p>Then reference it in a job by using a local path reference after checkout.</p><p>You can simply remove the old <code>Setup Hugo</code> and <code>Build</code> steps from <code>.github/workflows/cicd.yaml</code> and replace them with the new action.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Build</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>./.github/actions/build</span>
</span></span></code></pre></div><div style=position:relative><div style=position:absolute;top:0;right:0><a href=https://justinianfruit.github.io/workshop-learn-github-actions/credits#artist><figure style=padding:0;margin:0><img src=https://justinianfruit.github.io/workshop-learn-github-actions/art/gray-dog-icons/head.png style=width:3em></figure></a></div><div><blockquote class="book-hint info"><p>You might notice that using a custom action is a lot like using a 3rd party action.<br><br>That&rsquo;s because 3rd party actions are simply custom actions that have been given dedicated repositories. All 3rd party actions that you use are either composite actions or javascript actions that are simply hosted in a dedicated repository instead of a directory in your own repository.</p></div></div><div class=pagebreak></div></div></div><h3 id=docker-container-actions>Docker Container Actions
<a class=anchor href=#docker-container-actions>#</a></h3><div class=slide><div class=slide-nav><a rel=noopener class="book-btn prevSegment">Back
</a><a rel=noopener class="book-btn nextSegment" style=position:absolute;right:0>Next</a></br></div><div class=slide-content><p><a href=https://docs.github.com/en/actions/sharing-automations/creating-actions/creating-a-docker-container-action>Docker Container Actions</a> allow you to package up OCI compatible images
into a repeatable unit.</p><h4 id=advantages>Advantages
<a class=anchor href=#advantages>#</a></h4><ul><li>Fully contained and repeatable build environments</li><li>All the other great things from containers</li></ul><h4 id=disadvantages>Disadvantages
<a class=anchor href=#disadvantages>#</a></h4><ul><li>More overhead to maintain due to needing new builds to change behavior</li><li>Won&rsquo;t work on all runners<ul><li>Will work on all GitHub runners</li><li>Custom runners need to be linux and have extra setup</li></ul></li></ul><div class=pagebreak></div></div></div><h4 id=build-it-1>Build It
<a class=anchor href=#build-it-1>#</a></h4><div class=slide><div class=slide-nav><a rel=noopener class="book-btn prevSegment">Back
</a><a rel=noopener class="book-btn nextSegment" style=position:absolute;right:0>Next</a></br></div><div class=slide-content><blockquote><p>Prerequisite: Build a docker image and publish it somewhere that GitHub Actions can reach. I suggest
the <a href=https://docs.github.com/en/packages/working-with-a-github-packages-registry/working-with-the-container-registry>GitHub Container Registry</a>
which is easy to use, free, and integrates well with GitHub Actions.</p></blockquote><p>Outside the image creation (not covered here) building a Docker action is pretty easy. Create a new file at <code>.github/actions/cloc/action.yaml</code> with the content below.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>name</span>: <span style=color:#e6db74>&#39;Count lines of code&#39;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>description</span>: <span style=color:#e6db74>&#39;Run a hugo command in a container with all the dependencies&#39;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>inputs</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>path</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>description</span>: <span style=color:#e6db74>&#39;Count lines of code only under the given path&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>required</span>: <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>default</span>: <span style=color:#e6db74>&#34;.&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>runs</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>using</span>: <span style=color:#e6db74>&#39;docker&#39;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>image</span>: <span style=color:#ae81ff>aldanial/cloc</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>args</span>:
</span></span><span style=display:flex><span>    - <span style=color:#ae81ff>${{ inputs.path }}</span>
</span></span></code></pre></div><div class=pagebreak></div></div></div><h4 id=use-it-1>Use It
<a class=anchor href=#use-it-1>#</a></h4><div class=slide><div class=slide-nav><a rel=noopener class="book-btn prevSegment">Back
</a><a rel=noopener class="book-btn nextSegment" style=position:absolute;right:0>Next</a></br></div><div class=slide-content><p>Then reference it in a job by using a local path reference after checkout and build</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>CLOC</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>./.github/actions/cloc</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>with</span>:
</span></span><span style=display:flex><span>          <span style=color:#f92672>path</span>: <span style=color:#ae81ff>public</span>
</span></span></code></pre></div><p>Now when you <code>fixup</code> the changes you should have a new &ldquo;CLOC&rdquo; output in the job
that tells you how many lines of code are in the rendered <code>public</code> directory.</p><p>This isn&rsquo;t particularly, but is a nice minimal example of using Docker to provide a runtime
environment instead of installing things into the runner each time.</p><p>This is particularly useful with tools that are built on scripting languages as they are notoriously difficult
to distribute and set up in CICD.</p><p><img src=cloc-action-output.png alt="cloc output"></p><div class=pagebreak></div></div></div><h3 id=javascript-actions>Javascript Actions
<a class=anchor href=#javascript-actions>#</a></h3><div class=slide><div class=slide-nav><a rel=noopener class="book-btn prevSegment">Back
</a><a rel=noopener class="book-btn nextSegment" style=position:absolute;right:0>Next</a></br></div><div class=slide-content><p>While you can get a lot done with shell scripts, they often have complex dependencies with the runner environment and can be difficult to debug. Javascript actions are a way to write actions in a more structured way using Node.js.</p><h4 id=advantages>Advantages
<a class=anchor href=#advantages>#</a></h4><ul><li>Few runtime dependencies because GitHub runners always have a built-in Node.js environment ready to go</li><li>Prebuilt GitHub Actions node modules simplify many operations</li><li>Access to the full Node.js ecosystem</li></ul><h4 id=disadvantages>Disadvantages
<a class=anchor href=#disadvantages>#</a></h4><ul><li>More complex to set up</li><li>More overhead to maintain<ul><li>For best results, they should be split into a dedicated repo with a build and release process</li></ul></li></ul><div class=pagebreak></div></div></div><h4 id=build-it-2>Build It
<a class=anchor href=#build-it-2>#</a></h4><div class=slide><div class=slide-nav><a rel=noopener class="book-btn prevSegment">Back
</a><a rel=noopener class="book-btn nextSegment" style=position:absolute;right:0>Next</a></br></div><div class=slide-content><p>Building a javascript action is more involved but starts the same way as others. Create a new file at <code>.github/actions/info/action.yaml</code> with the content below.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>name</span>: <span style=color:#e6db74>&#39;Info&#39;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>description</span>: <span style=color:#e6db74>&#39;Print Build Info Using Javascript&#39;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>inputs</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>fields</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>description</span>: <span style=color:#e6db74>&#39;Fields in the context payload to print out. Comma separated. Empty prints entire payload&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>required</span>: <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span><span style=color:#f92672>outputs</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>time</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>description</span>: <span style=color:#e6db74>&#39;The time at which info was printed&#39;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>runs</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>using</span>: <span style=color:#e6db74>&#39;node20&#39;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>main</span>: <span style=color:#e6db74>&#39;index.js&#39;</span>
</span></span></code></pre></div><p>Next we init the node components</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>cd .github/actions/info
</span></span><span style=display:flex><span>npm init -y
</span></span><span style=display:flex><span>npm install @actions/core
</span></span><span style=display:flex><span>npm install @actions/github
</span></span><span style=display:flex><span>npm install toml
</span></span></code></pre></div><p>Now, write the <code>index.js</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-txt data-lang=txt><span style=display:flex><span>.github/actions/info/index.js
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>core</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#39;@actions/core&#39;</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>github</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#39;@actions/github&#39;</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>fs</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#39;fs&#39;</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>toml</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#39;toml&#39;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>try</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>fields</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>core</span>.<span style=color:#a6e22e>getInput</span>(<span style=color:#e6db74>&#39;fields&#39;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span><span style=color:#a6e22e>fields</span>) {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Get the JSON webhook payload for the event that triggered the workflow and print it
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>payload</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>JSON</span>.<span style=color:#a6e22e>stringify</span>(<span style=color:#a6e22e>github</span>.<span style=color:#a6e22e>context</span>.<span style=color:#a6e22e>payload</span>, <span style=color:#66d9ef>undefined</span>, <span style=color:#ae81ff>2</span>)
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#34;Payload&#34;</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>payload</span>);
</span></span><span style=display:flex><span>  } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#34;Payload fields:&#34;</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>field</span> <span style=color:#66d9ef>of</span> <span style=color:#a6e22e>fields</span>.<span style=color:#a6e22e>split</span>(<span style=color:#e6db74>&#39;,&#39;</span>)) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>github</span>.<span style=color:#a6e22e>context</span>.<span style=color:#a6e22e>payload</span>[<span style=color:#a6e22e>field</span>.<span style=color:#a6e22e>trim</span>()];
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>`Field: </span><span style=color:#e6db74>${</span><span style=color:#a6e22e>field</span>.<span style=color:#a6e22e>trim</span>()<span style=color:#e6db74>}</span><span style=color:#e6db74> = `</span>, <span style=color:#a6e22e>value</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// read ./config.toml as toml and put the base url in the summary
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>config</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>fs</span>.<span style=color:#a6e22e>readFileSync</span>(<span style=color:#e6db74>&#39;./config.toml&#39;</span>, <span style=color:#e6db74>&#39;utf-8&#39;</span>);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>parsed</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>toml</span>.<span style=color:#a6e22e>parse</span>(<span style=color:#a6e22e>config</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>core</span>.<span style=color:#a6e22e>summary</span>.<span style=color:#a6e22e>addHeading</span>(<span style=color:#e6db74>`Built &#34;</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>parsed</span>.<span style=color:#a6e22e>title</span><span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;`</span>, <span style=color:#ae81ff>3</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>fields</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>rows</span> <span style=color:#f92672>=</span> [[{<span style=color:#a6e22e>data</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;Field&#34;</span>, <span style=color:#a6e22e>header</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>}, {<span style=color:#a6e22e>data</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;Value&#34;</span>, <span style=color:#a6e22e>header</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>}]];
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>field</span> <span style=color:#66d9ef>of</span> <span style=color:#a6e22e>fields</span>.<span style=color:#a6e22e>split</span>(<span style=color:#e6db74>&#39;,&#39;</span>)) {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>rows</span>.<span style=color:#a6e22e>push</span>([
</span></span><span style=display:flex><span>        {<span style=color:#a6e22e>data</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>field</span>.<span style=color:#a6e22e>trim</span>(), <span style=color:#a6e22e>header</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span>},
</span></span><span style=display:flex><span>        {<span style=color:#a6e22e>data</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>JSON</span>.<span style=color:#a6e22e>stringify</span>(<span style=color:#a6e22e>github</span>.<span style=color:#a6e22e>context</span>.<span style=color:#a6e22e>payload</span>[<span style=color:#a6e22e>field</span>.<span style=color:#a6e22e>trim</span>()]), <span style=color:#a6e22e>header</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span>},
</span></span><span style=display:flex><span>      ]);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>core</span>.<span style=color:#a6e22e>summary</span>.<span style=color:#a6e22e>addTable</span>(<span style=color:#a6e22e>rows</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>core</span>.<span style=color:#a6e22e>summary</span>.<span style=color:#a6e22e>write</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>time</span> <span style=color:#f92672>=</span> (<span style=color:#66d9ef>new</span> Date()).<span style=color:#a6e22e>toTimeString</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>core</span>.<span style=color:#a6e22e>setOutput</span>(<span style=color:#e6db74>&#34;time&#34;</span>, <span style=color:#a6e22e>time</span>);
</span></span><span style=display:flex><span>} <span style=color:#66d9ef>catch</span> (<span style=color:#a6e22e>error</span>) {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>core</span>.<span style=color:#a6e22e>setFailed</span>(<span style=color:#a6e22e>error</span>.<span style=color:#a6e22e>message</span>);
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><div class=pagebreak></div></div></div><h4 id=use-it-2>Use It
<a class=anchor href=#use-it-2>#</a></h4><div class=slide><div class=slide-nav><a rel=noopener class="book-btn prevSegment">Back
</a><a href=https://justinianfruit.github.io/workshop-learn-github-actions/workshop/closing class=book-btn style=position:absolute;right:0>Next</a></br></div><div class=slide-content><p>Then reference it in a job by using a local path reference after checkout and build</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Info</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>./.github/actions/info</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>with</span>:
</span></span><span style=display:flex><span>          <span style=color:#f92672>fields</span>: <span style=color:#e6db74>&#34;ref,pusher&#34;</span>
</span></span></code></pre></div><div class=pagebreak></div></div></div></article></div><footer class=book-footer><div class="flex flex-wrap justify-between"></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#reminder-set-up-the-fixup-alias>Reminder: Set up the fixup alias</a></li><li><a href=#expressions>Expressions</a></li><li><a href=#metadata>Metadata</a></li><li><a href=#current-actions>Current Actions</a><ul><li><a href=#3rd-party-actions>3rd Party Actions</a><ul><li><a href=#advanced-usage---pinning>Advanced Usage - Pinning</a></li></ul></li><li><a href=#script-actions>Script Actions</a></li></ul></li><li><a href=#new-actions>New Actions</a><ul><li><a href=#composite-actions>Composite Actions</a><ul><li><a href=#build-it>Build it</a></li><li><a href=#use-it>Use it</a></li></ul></li><li><a href=#docker-container-actions>Docker Container Actions</a><ul><li><a href=#build-it-1>Build It</a></li><li><a href=#use-it-1>Use It</a></li></ul></li><li><a href=#javascript-actions>Javascript Actions</a><ul><li><a href=#build-it-2>Build It</a></li><li><a href=#use-it-2>Use It</a></li></ul></li></ul></li></ul></nav></div></aside></main><script>for(var parent,style,children,j,childStyle,nextSegments,prevSegment,code=document.querySelectorAll("code.language-bash"),i=0;i<code.length;i++)parent=code[i].parentElement,style=parent.getAttribute("style"),style==null&&(style=""),parent.setAttribute("style",style+";font-size: large;border: 1px solid #404239; filter: drop-shadow(0 0 0.5rem #404239);");for(code=document.querySelectorAll("code.language-txt"),i=0;i<code.length;i++){parent=code[i].parentElement,style=parent.getAttribute("style"),style==null&&(style=""),parent.setAttribute("style",style+";background-color: #f5f5f5; color: #333");for(children=code[i].querySelectorAll("[style]"),j=0;j<children.length;j++)childStyle=children[j].getAttribute("style"),childStyle.indexOf("background-color")>-1&&(console.log("found background-color"),childStyle=childStyle+";background-color: #ddd; color: #333",children[j].setAttribute("style",childStyle))}get_next_heading=function(e){for(var t=e.nextElementSibling;t;){if(t.tagName=="H1"||t.tagName=="H2"||t.tagName=="H3"||t.tagName=="H4"||t.tagName=="H5"||t.tagName=="H6")return t;t=t.nextElementSibling}return null};for(nextSegments=document.getElementsByClassName("nextSegment"),i=0;i<nextSegments.length;i++){let s=nextSegments[i],t=s;for(;t&&!t.classList.contains("slide");)t=t.parentElement;let e=get_next_heading(t);if(e==null)break;s.addEventListener("click",function(){e.scrollIntoView(),e.scrollIntoView(),e.scrollBy(0,-500),window.location.hash=e.id});let n=e.innerText;n.endsWith(" #")&&(n=n.substring(0,n.length-2)),s.innerText=s.innerText+" ("+n+")"}for(prevSegment=document.getElementsByClassName("prevSegment"),i=0;i<prevSegment.length;i++)prevSegment[i].addEventListener("click",function(){console.log("BUTTON",this);for(var e,t=this.parentElement.parentElement.previousElementSibling;t;){if(t.classList.contains("slide"))for(e=t.previousElementSibling;e;){if(e.tagName=="H1"||e.tagName=="H2"||e.tagName=="H3"||e.tagName=="H4"||e.tagName=="H5"||e.tagName=="H6"){e.scrollIntoView(),e.scrollBy(0,-500),window.location.hash=e.id;return}e=e.previousElementSibling}t=t.previousElementSibling}})</script></body></html>